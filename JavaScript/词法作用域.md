# 词法作用域

在上一篇中，我们将“作用域”比作一套规则，引擎根据这套规则在当前作用域及嵌套的作用域中查询标识符(变量)。

作用域的工作模式主要有两种：词法作用域和动态作用域。
JavaScript使用的是词法作用域。

简单的说，词法作用域就是定义在词法阶段(编译器的一个工作阶段叫词法化，会对源代码的字符进行检查，如，var a = 2会被分解成词法单元var、a、=、2)的作用域。

换句话说，词法作用域是由你在编写代码时将变量和块作用域写在哪里来决定的，因此词法分析器处理代码时会保持作用域不变(大部分情况是这样的)。

考虑如下代码

```js
function foo() {
    console.log(a)
}

function bar() {
    let a = 2
    foo()
}

let a = 1

bar() // 1
```

foo是定义在全局的函数，因此引擎在执行`console.log(a)`会先在foo作用域内对a进行RHS查询，查询不到就会在foo的外层嵌套作用域(也就是全局作用域)进行RHS查询。
